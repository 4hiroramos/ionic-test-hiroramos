{"ast":null,"code":"/**\n * Utility methods used when querying a site in order to discover its available\n * API endpoints\n *\n * @module autodiscovery\n */\n'use strict';\n\nconst parseLinkHeader = require('li').parse;\n/**\n * Attempt to locate a `rel=\"https://api.w.org\"` link relation header\n *\n * @method locateAPIRootHeader\n * @param {Object} response A response object with a link or headers property\n * @returns {String} The URL of the located API root\n */\n\n\nfunction locateAPIRootHeader(response) {\n  // See https://developer.wordpress.org/rest-api/using-the-rest-api/discovery/\n  const rel = 'https://api.w.org/'; // Extract & parse the response link headers\n\n  const link = response.link || response.headers && response.headers.link;\n  const headers = parseLinkHeader(link);\n  const apiHeader = headers && headers[rel];\n\n  if (apiHeader) {\n    return apiHeader;\n  }\n\n  throw new Error(`No header link found with rel=\"${rel}\"`);\n}\n\nmodule.exports = {\n  locateAPIRootHeader: locateAPIRootHeader\n};","map":{"version":3,"sources":["/Users/hiromi/ionic-react-wordpress/node_modules/wpapi/lib/autodiscovery.js"],"names":["parseLinkHeader","require","parse","locateAPIRootHeader","response","rel","link","headers","apiHeader","Error","module","exports"],"mappings":"AAAA;;;;;;AAMA;;AAEA,MAAMA,eAAe,GAAGC,OAAO,CAAE,IAAF,CAAP,CAAgBC,KAAxC;AAEA;;;;;;;;;AAOA,SAASC,mBAAT,CAA8BC,QAA9B,EAAyC;AACxC;AACA,QAAMC,GAAG,GAAG,oBAAZ,CAFwC,CAIxC;;AACA,QAAMC,IAAI,GAAGF,QAAQ,CAACE,IAAT,IAAmBF,QAAQ,CAACG,OAAT,IAAoBH,QAAQ,CAACG,OAAT,CAAiBD,IAArE;AACA,QAAMC,OAAO,GAAGP,eAAe,CAAEM,IAAF,CAA/B;AAEA,QAAME,SAAS,GAAGD,OAAO,IAAIA,OAAO,CAAEF,GAAF,CAApC;;AAEA,MAAKG,SAAL,EAAiB;AAChB,WAAOA,SAAP;AACA;;AAED,QAAM,IAAIC,KAAJ,CAAY,kCAAkCJ,GAAK,GAAnD,CAAN;AACA;;AAEDK,MAAM,CAACC,OAAP,GAAiB;AAChBR,EAAAA,mBAAmB,EAAEA;AADL,CAAjB","sourcesContent":["/**\n * Utility methods used when querying a site in order to discover its available\n * API endpoints\n *\n * @module autodiscovery\n */\n'use strict';\n\nconst parseLinkHeader = require( 'li' ).parse;\n\n/**\n * Attempt to locate a `rel=\"https://api.w.org\"` link relation header\n *\n * @method locateAPIRootHeader\n * @param {Object} response A response object with a link or headers property\n * @returns {String} The URL of the located API root\n */\nfunction locateAPIRootHeader( response ) {\n\t// See https://developer.wordpress.org/rest-api/using-the-rest-api/discovery/\n\tconst rel = 'https://api.w.org/';\n\n\t// Extract & parse the response link headers\n\tconst link = response.link || ( response.headers && response.headers.link );\n\tconst headers = parseLinkHeader( link );\n\n\tconst apiHeader = headers && headers[ rel ];\n\n\tif ( apiHeader ) {\n\t\treturn apiHeader;\n\t}\n\n\tthrow new Error( `No header link found with rel=\"${ rel }\"` );\n}\n\nmodule.exports = {\n\tlocateAPIRootHeader: locateAPIRootHeader,\n};\n"]},"metadata":{},"sourceType":"script"}