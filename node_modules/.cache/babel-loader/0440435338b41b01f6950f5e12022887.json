{"ast":null,"code":"import _slicedToArray from\"/Users/hiromi/ionic-react-wordpress/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonContent,IonIcon,IonItem,IonLabel,IonList,IonListHeader,IonMenu,IonMenuToggle,IonNote}from'@ionic/react';import{useMediaQuery}from'react-responsive';import React,{useEffect,useState,useMemo}from'react';import{useLocation}from'react-router-dom';import{librarySharp,home,readerOutline}from'ionicons/icons';import'./Menu.css';import config from'../config';import{createRelativeLink}from'../helpers/url';var Menu=function Menu(){var location=useLocation();var _useState=useState('loading...'),_useState2=_slicedToArray(_useState,2),siteName=_useState2[0],setSiteName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),categories=_useState6[0],setCategories=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),pages=_useState8[0],setPages=_useState8[1];useEffect(function(){// Load site metadata\nconfig.wpClient.root().then(function(data){setSiteName(data.name);setDescription(data.description);});// Load categories\nconfig.wpClient.categories().perPage(100).param({parent:0}).then(function(data){setCategories(data.sort(function(a,b){if(a.id<b.id)return-1;if(a.id>b.id)return 1;return 0;}));});// Load pages\nconfig.wpClient.pages().perPage(100).then(function(data){setPages(data.sort(function(a,b){if(a.id<b.id)return-1;if(a.id>b.id)return 1;return 0;}));});},[]);var isDesktop=useMediaQuery({minWidth:992});var side=useMemo(function(){return isDesktop?'start':'end';},[isDesktop]);return/*#__PURE__*/React.createElement(IonMenu,{contentId:\"main\",type:\"overlay\",side:side},/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(IonList,{id:\"inbox-list\"},/*#__PURE__*/React.createElement(IonListHeader,null,/*#__PURE__*/React.createElement(IonLabel,null,siteName)),/*#__PURE__*/React.createElement(IonNote,null,description),/*#__PURE__*/React.createElement(IonMenuToggle,{autoHide:false},/*#__PURE__*/React.createElement(IonItem,{className:location.pathname==='/page'?'selected':'',routerLink:\"/\",routerDirection:\"none\",lines:\"none\",detail:false},/*#__PURE__*/React.createElement(IonIcon,{slot:\"start\",icon:home}),/*#__PURE__*/React.createElement(IonLabel,null,\"Home\")))),/*#__PURE__*/React.createElement(IonList,{id:\"inbox-list\"},/*#__PURE__*/React.createElement(IonListHeader,null,/*#__PURE__*/React.createElement(IonLabel,null,\"Categories\")),categories.map(function(category){var path=\"/category/\".concat(category.slug);return/*#__PURE__*/React.createElement(IonMenuToggle,{key:category.id,autoHide:false},/*#__PURE__*/React.createElement(IonItem,{className:location.pathname===path?'selected':'',routerLink:path,routerDirection:\"none\",lines:\"none\",detail:false},/*#__PURE__*/React.createElement(IonIcon,{slot:\"start\",icon:librarySharp}),/*#__PURE__*/React.createElement(IonLabel,null,category.name)));})),/*#__PURE__*/React.createElement(IonList,{id:\"inbox-list\"},/*#__PURE__*/React.createElement(IonListHeader,null,/*#__PURE__*/React.createElement(IonLabel,null,\"Pages\")),pages.map(function(page){var path=createRelativeLink(config.pageURLPrefix,page.slug);return/*#__PURE__*/React.createElement(IonMenuToggle,{key:page.id,autoHide:false},/*#__PURE__*/React.createElement(IonItem,{className:location.pathname===path?'selected':'',routerLink:path,routerDirection:\"none\",lines:\"none\",detail:false},/*#__PURE__*/React.createElement(IonIcon,{slot:\"start\",icon:readerOutline}),/*#__PURE__*/React.createElement(IonLabel,null,page.title.rendered)));}))));};export default Menu;","map":{"version":3,"sources":["/Users/hiromi/ionic-react-wordpress/src/components/Menu.tsx"],"names":["IonContent","IonIcon","IonItem","IonLabel","IonList","IonListHeader","IonMenu","IonMenuToggle","IonNote","useMediaQuery","React","useEffect","useState","useMemo","useLocation","librarySharp","home","readerOutline","config","createRelativeLink","Menu","location","siteName","setSiteName","description","setDescription","categories","setCategories","pages","setPages","wpClient","root","then","data","name","perPage","param","parent","sort","a","b","id","isDesktop","minWidth","side","pathname","map","category","path","slug","page","pageURLPrefix","title","rendered"],"mappings":"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","sourcesContent":["import {\n  IonContent,\n  IonIcon,\n  IonItem,\n  IonLabel,\n  IonList,\n  IonListHeader,\n  IonMenu,\n  IonMenuToggle,\n  IonNote,\n} from '@ionic/react';\nimport {\n  useMediaQuery\n} from 'react-responsive'\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { librarySharp, home, readerOutline } from 'ionicons/icons';\nimport './Menu.css';\nimport config from '../config';\nimport {\nWPCategory, WPPosts\n} from '../wp.interface'\nimport { createRelativeLink } from '../helpers/url';\n\nconst Menu: React.FC = () => {\n  const location = useLocation();\n\n  const [siteName, setSiteName] = useState('loading...')\n  const [description, setDescription] = useState('')\n  const [categories, setCategories] = useState<WPCategory[]>([])\n  const [pages, setPages] = useState<WPPosts>([])\n  \n  useEffect(() => {\n    // Load site metadata\n    config.wpClient.root().then(data => {\n      setSiteName(data.name)\n      setDescription(data.description)\n    })\n    // Load categories\n    config.wpClient.categories().perPage(100).param({parent: 0})\n    .then((data: WPCategory[]) => {\n      setCategories(data.sort((a, b) => {\n        if( a.id < b.id ) return -1;\n        if( a.id > b.id ) return 1;\n        return 0;\n      }))\n    })\n    // Load pages\n    config.wpClient.pages().perPage(100)\n    .then((data: WPPosts) => {\n      setPages(data.sort((a,b) => {\n        if( a.id < b.id ) return -1;\n        if( a.id > b.id ) return 1;\n        return 0;\n      }))\n    })\n  }, [])\n  const isDesktop = useMediaQuery({ minWidth: 992 })\n  const side = useMemo(() => isDesktop ? 'start' : 'end', [isDesktop])\n  return (\n    <IonMenu contentId=\"main\" type=\"overlay\" side={side}>\n      <IonContent>\n        <IonList id=\"inbox-list\">\n          <IonListHeader>\n              <IonLabel>\n                {siteName}\n              </IonLabel>\n          </IonListHeader>\n          <IonNote>{description}</IonNote>\n          <IonMenuToggle autoHide={false}>\n            <IonItem className={location.pathname === '/page' ? 'selected' : ''} routerLink=\"/\" routerDirection=\"none\" lines=\"none\" detail={false}>\n              <IonIcon slot=\"start\" icon={home} />\n              <IonLabel>Home</IonLabel>\n            </IonItem>\n          </IonMenuToggle>\n          </IonList>\n        <IonList id=\"inbox-list\">\n          <IonListHeader><IonLabel>Categories</IonLabel></IonListHeader>\n          {categories.map(category => {\n            const path = `/category/${category.slug}`\n            return (\n              <IonMenuToggle key={category.id} autoHide={false}>\n                <IonItem className={location.pathname === path ? 'selected' : ''} routerLink={path} routerDirection=\"none\" lines=\"none\" detail={false}>\n                  <IonIcon slot=\"start\" icon={librarySharp} />\n                  <IonLabel>{category.name}</IonLabel>\n                </IonItem>\n              </IonMenuToggle>\n            )}\n          )}\n        </IonList>\n        <IonList id=\"inbox-list\">\n          <IonListHeader><IonLabel>Pages</IonLabel></IonListHeader>\n          {pages.map(page => {\n            const path = createRelativeLink( config.pageURLPrefix, page.slug)\n            return (\n              <IonMenuToggle key={page.id} autoHide={false}>\n                <IonItem className={location.pathname === path ? 'selected' : ''} routerLink={path} routerDirection=\"none\" lines=\"none\" detail={false}>\n                  <IonIcon slot=\"start\" icon={readerOutline} />\n                  <IonLabel>{page.title.rendered}</IonLabel>\n                </IonItem>\n              </IonMenuToggle>\n            )}\n          )}\n        </IonList>\n      </IonContent>\n    </IonMenu>\n  );\n};\n\nexport default Menu;\n"]},"metadata":{},"sourceType":"module"}